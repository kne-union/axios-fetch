"use strict";(self.webpackChunk_kne_components_axios_fetch=self.webpackChunk_kne_components_axios_fetch||[]).push([[690],{5690:(n,t,e)=>{e.r(t),e.d(t,{default:()=>d,manifest:()=>o});const d={AxiosFetch:{name:"axios-fetch",summary:"<h3>\u6a21\u5757\u6982\u8ff0</h3>\n<p>\u672c\u6a21\u5757\u63d0\u4f9b\u4e86\u4e00\u5957\u57fa\u4e8e Promise \u7684 HTTP \u8bf7\u6c42\u5c01\u88c5\uff0c\u4e3b\u8981\u5305\u542b\u4ee5\u4e0b\u6838\u5fc3\u529f\u80fd\uff1a</p>\n<ol>\n<li><strong>\u57fa\u7840\u8bf7\u6c42\u5904\u7406</strong>\uff1a\u652f\u6301\u5e38\u89c4\u8bf7\u6c42\u548c\u7279\u6b8a\u8868\u5355\u63d0\u4ea4</li>\n<li><strong>\u81ea\u52a8\u9519\u8bef\u5904\u7406</strong>\uff1a\u5185\u7f6e\u7edf\u4e00\u9519\u8bef\u6355\u83b7\u673a\u5236</li>\n<li><strong>URL \u53c2\u6570\u5904\u7406</strong>\uff1a\u81ea\u52a8\u89e3\u6790 URL \u53c2\u6570\u548c\u67e5\u8be2\u5b57\u7b26\u4e32</li>\n<li><strong>\u54cd\u5e94\u683c\u5f0f\u6807\u51c6\u5316</strong>\uff1a\u7edf\u4e00\u8fd4\u56de\u6570\u636e\u683c\u5f0f\u4e3a <code>{ code, data, msg }</code> \u7ed3\u6784</li>\n<li><strong>\u8bf7\u6c42\u52a0\u8f7d\u5668</strong>\uff1a\u652f\u6301\u901a\u8fc7 loader \u51fd\u6570\u9884\u5904\u7406\u8bf7\u6c42\u53c2\u6570</li>\n</ol>\n<h3>\u6838\u5fc3\u65b9\u6cd5</h3>\n<h3><code>createAjax(config)</code></h3>\n<pre><code class=\"language-javascript\">import createAjax from '@kne/axios-fetch';\n\nconst ajax = createAjax(options);\n</code></pre>\n<h3>\u5168\u5c40\u914d\u7f6e\u53c2\u6570</h3>\n<table>\n<thead>\n<tr>\n<th>\u53c2\u6570\u540d</th>\n<th>\u7c7b\u578b</th>\n<th>\u9ed8\u8ba4\u503c</th>\n<th>\u63cf\u8ff0</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>baseUrl</code></td>\n<td><code>String</code></td>\n<td><code>''</code></td>\n<td>\u57fa\u7840\u8bf7\u6c42\u8def\u5f84</td>\n</tr>\n<tr>\n<td><code>getDefaultHeaders</code></td>\n<td><code>Function</code></td>\n<td><code>() =&gt; ({})</code></td>\n<td>\u83b7\u53d6\u9ed8\u8ba4\u8bf7\u6c42\u5934\u7684\u51fd\u6570</td>\n</tr>\n<tr>\n<td><code>defaultError</code></td>\n<td><code>String</code></td>\n<td><code>'\u8bf7\u6c42\u53d1\u751f\u9519\u8bef'</code></td>\n<td>\u9ed8\u8ba4\u9519\u8bef\u63d0\u793a\u4fe1\u606f</td>\n</tr>\n<tr>\n<td><code>showResponseError</code></td>\n<td><code>Function</code></td>\n<td><code>(response) =&gt; {...}</code></td>\n<td>\u5224\u65ad\u662f\u5426\u663e\u793a\u9519\u8bef\u4fe1\u606f\u7684\u51fd\u6570</td>\n</tr>\n<tr>\n<td><code>getResponseError</code></td>\n<td><code>Function</code></td>\n<td><code>(response) =&gt; {...}</code></td>\n<td>\u4ece\u54cd\u5e94\u4e2d\u63d0\u53d6\u9519\u8bef\u4fe1\u606f\u7684\u51fd\u6570</td>\n</tr>\n<tr>\n<td><code>errorHandler</code></td>\n<td><code>Function</code></td>\n<td><code>() =&gt; {}</code></td>\n<td>\u5168\u5c40\u9519\u8bef\u5904\u7406\u51fd\u6570</td>\n</tr>\n<tr>\n<td><code>validateStatus</code></td>\n<td><code>Function</code></td>\n<td><code>() =&gt; true</code></td>\n<td>\u9a8c\u8bc1\u54cd\u5e94\u72b6\u6001\u7684\u51fd\u6570</td>\n</tr>\n<tr>\n<td><code>registerInterceptors</code></td>\n<td><code>Function</code></td>\n<td><code>() =&gt; {}</code></td>\n<td>\u6ce8\u518c\u62e6\u622a\u5668\u7684\u51fd\u6570</td>\n</tr>\n</tbody>\n</table>\n<h3>\u914d\u7f6e\u51fd\u6570\u8be6\u7ec6\u8bf4\u660e</h3>\n<h4><code>showResponseError(response)</code></h4>\n<p>\u5224\u65ad\u662f\u5426\u5e94\u8be5\u663e\u793a\u9519\u8bef\u4fe1\u606f</p>\n<p><strong>\u53c2\u6570</strong>:</p>\n<ul>\n<li><code>response</code>: \u54cd\u5e94\u5bf9\u8c61</li>\n</ul>\n<p><strong>\u8fd4\u56de\u503c</strong>:</p>\n<ul>\n<li><code>Boolean</code>: \u662f\u5426\u663e\u793a\u9519\u8bef</li>\n</ul>\n<p><strong>\u9ed8\u8ba4\u903b\u8f91</strong>:</p>\n<pre><code class=\"language-javascript\">response.status !== 200 || \n(Object.hasOwn(response.data, 'code') &amp;&amp; \n response.data.code !== 0 &amp;&amp; \n response.config.showError !== false)\n</code></pre>\n<h4><code>getResponseError(response)</code></h4>\n<p>\u4ece\u54cd\u5e94\u4e2d\u63d0\u53d6\u9519\u8bef\u4fe1\u606f</p>\n<p><strong>\u53c2\u6570</strong>:</p>\n<ul>\n<li><code>response</code>: \u54cd\u5e94\u5bf9\u8c61</li>\n</ul>\n<p><strong>\u8fd4\u56de\u503c</strong>:</p>\n<ul>\n<li><code>String</code>: \u9519\u8bef\u4fe1\u606f</li>\n</ul>\n<p><strong>\u67e5\u627e\u987a\u5e8f</strong>:</p>\n<ol>\n<li><code>response.data.msg</code></li>\n<li><code>response.data.error_msg.detail</code></li>\n<li><code>response.data.error_msg</code></li>\n</ol>\n<h3>\u4f7f\u7528\u793a\u4f8b</h3>\n<pre><code class=\"language-javascript\">// \u521d\u59cb\u5316\u914d\u7f6e\nconst options = {\n  baseUrl: 'https://api.example.com',\n  getDefaultHeaders: () =&gt; ({\n    'X-Requested-With': 'XMLHttpRequest'\n  }),\n  errorHandler: (error) =&gt; {\n    console.error('\u8bf7\u6c42\u9519\u8bef:', error);\n  }\n};\n\n// \u5e94\u7528\u914d\u7f6e\ncreateAjax(options);\n</code></pre>\n<h3>\u57fa\u7840\u8bf7\u6c42\u65b9\u6cd5\uff0c\u652f\u6301\u4e24\u79cd\u8c03\u7528\u65b9\u5f0f\uff1a</h3>\n<h4>1. \u4f7f\u7528 loader \u51fd\u6570</h4>\n<pre><code class=\"language-javascript\">ajax({\n  loader: (params) =&gt; {\n    // \u9884\u5904\u7406\u903b\u8f91\n    return processedData;\n  }\n}).then(response =&gt; {\n  // \u54cd\u5e94\u683c\u5f0f: { data: { code: 0, data: ... } }\n});\n</code></pre>\n<p><strong>\u7279\u6027</strong>\uff1a</p>\n<ul>\n<li>\u81ea\u52a8\u5305\u88c5 loader \u8fd4\u56de\u503c\u4e3a\u6807\u51c6\u54cd\u5e94\u683c\u5f0f</li>\n<li>\u9519\u8bef\u81ea\u52a8\u6355\u83b7\uff08code 500\uff09</li>\n<li>\u652f\u6301\u9ed8\u8ba4\u9519\u8bef\u5904\u7406\u5668</li>\n</ul>\n<h4>2. \u5e38\u89c4\u8bf7\u6c42</h4>\n<pre><code class=\"language-javascript\">ajax({\n  url: '/api/endpoint',\n  method: 'get',\n  params: { id: 123 }\n}).then(response =&gt; {\n  // \u6807\u51c6\u54cd\u5e94\u683c\u5f0f\n});\n</code></pre>\n<p><strong>\u81ea\u52a8\u5904\u7406</strong>\uff1a</p>\n<ul>\n<li>URL \u53c2\u6570\u89e3\u6790\uff08\u901a\u8fc7 <code>parseUrlParams</code>\uff09</li>\n<li>\u57fa\u7840\u8def\u5f84\u81ea\u52a8\u62fc\u63a5</li>\n</ul>\n<h3><code>ajax.postForm(config)</code></h3>\n<p>\u4e13\u95e8\u7684\u8868\u5355\u63d0\u4ea4\u65b9\u6cd5</p>\n<pre><code class=\"language-javascript\">ajax.postForm({\n  url: '/submit',\n  params: { ref: 'web' },  // \u8f6c\u6362\u4e3a\u67e5\u8be2\u5b57\u7b26\u4e32\n  data: { name: 'value' }  // \u8868\u5355\u6570\u636e\n});\n</code></pre>\n<p><strong>\u7279\u6027</strong>\uff1a</p>\n<ul>\n<li>\u81ea\u52a8\u5c06 <code>params</code> \u8f6c\u6362\u4e3a URL \u67e5\u8be2\u5b57\u7b26\u4e32</li>\n<li>\u81ea\u52a8\u6dfb\u52a0\u9ed8\u8ba4\u8bf7\u6c42\u5934</li>\n<li>\u4f7f\u7528 <code>application/x-www-form-urlencoded</code> \u683c\u5f0f\u63d0\u4ea4</li>\n</ul>\n<h3>\u54cd\u5e94\u683c\u5f0f\u89c4\u8303</h3>\n<p>\u6240\u6709\u8bf7\u6c42\u8fd4\u56de\u7edf\u4e00\u683c\u5f0f\uff1a</p>\n<pre><code class=\"language-typescript\">{\n  data: {\n    code: number,  // 0-\u6210\u529f, \u975e0-\u9519\u8bef\n    data: any,     // \u54cd\u5e94\u6570\u636e\n    msg?: string   // \u9519\u8bef\u4fe1\u606f\n  }\n}\n</code></pre>\n<h3>\u9519\u8bef\u5904\u7406</h3>\n<ul>\n<li><strong>\u81ea\u52a8\u6355\u83b7</strong>\uff1a\u6240\u6709 loader \u51fd\u6570\u548c\u8bf7\u6c42\u9519\u8bef\u4f1a\u81ea\u52a8\u6355\u83b7</li>\n<li><strong>\u9519\u8bef\u7801</strong>\uff1a\u7cfb\u7edf\u9519\u8bef\u7edf\u4e00\u8fd4\u56de code 500</li>\n<li><strong>\u9519\u8bef\u6d88\u606f</strong>\uff1a\u4f18\u5148\u4f7f\u7528\u9519\u8bef\u5bf9\u8c61\u7684 message \u5c5e\u6027</li>\n</ul>\n<h3>\u4f7f\u7528\u793a\u4f8b</h3>\n<h4>\u57fa\u7840 GET \u8bf7\u6c42</h4>\n<pre><code class=\"language-javascript\">ajax({\n  url: '/user',\n  params: { id: 123 }\n}).then(({ data }) =&gt; {\n  if (data.code === 0) {\n    console.log(data.data);\n  }\n});\n</code></pre>\n<h4>\u8868\u5355\u63d0\u4ea4</h4>\n<pre><code class=\"language-javascript\">ajax.postForm({\n  url: '/register',\n  data: {\n    username: 'test',\n    password: '123456'\n  }\n});\n</code></pre>\n<h4>\u4f7f\u7528 loader \u9884\u5904\u7406</h4>\n<pre><code class=\"language-javascript\">ajax({\n  loader: () =&gt; {\n    return fetchSomeData();\n  }\n}).then(({ data }) =&gt; {\n  // \u5904\u7406\u6807\u51c6\u5316\u54cd\u5e94\n});\n</code></pre>\n<h3>\u6ce8\u610f\u4e8b\u9879</h3>\n<ol>\n<li><code>baseUrl</code> \u9700\u8981\u5728\u6a21\u5757\u5f15\u5165\u524d\u914d\u7f6e</li>\n<li>\u8868\u5355\u63d0\u4ea4\u65f6\u4e0d\u9700\u8981\u624b\u52a8\u8bbe\u7f6e <code>Content-Type</code></li>\n<li>\u9519\u8bef\u5904\u7406\u5668\u53ef\u901a\u8fc7\u5916\u90e8\u8986\u76d6\u5b9e\u73b0\u81ea\u5b9a\u4e49</li>\n</ol>",description:"\u4e00\u4e2aaxios\u7684\u7b80\u5355\u5c01\u88c5\uff0c\u652f\u6301loader\u548curl params\uff0c\u548c@kne/react-fetch\u4fdd\u6301\u7edf\u4e00",packageName:"@kne/axios-fetch",api:"<table>\n<thead>\n<tr>\n<th>\u65b9\u6cd5/\u5c5e\u6027</th>\n<th>\u7c7b\u578b</th>\n<th>\u63cf\u8ff0</th>\n<th>\u53c2\u6570</th>\n<th>\u8fd4\u56de\u503c</th>\n<th>\u793a\u4f8b</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>ajax(config)</strong></td>\n<td><code>Function</code></td>\n<td>\u57fa\u7840\u8bf7\u6c42\u65b9\u6cd5</td>\n<td><code>config: Object</code>:&lt;br&gt;- <code>url?: String</code>&lt;br&gt;- <code>method?: String</code>&lt;br&gt;- <code>params?: Object</code>&lt;br&gt;- <code>loader?: Function</code></td>\n<td><code>Promise&lt;{data: {code: number, data: any, msg?: string}}&gt;</code></td>\n<td><code>js&lt;br&gt;ajax({&lt;br&gt;  url: '/api',&lt;br&gt;  method: 'get'&lt;br&gt;})&lt;br&gt;</code></td>\n</tr>\n<tr>\n<td><strong>ajax.postForm(config)</strong></td>\n<td><code>Function</code></td>\n<td>\u8868\u5355\u63d0\u4ea4\u65b9\u6cd5</td>\n<td><code>config: Object</code>:&lt;br&gt;- <code>url: String</code>&lt;br&gt;- <code>params?: Object</code>&lt;br&gt;- <code>data: Object</code></td>\n<td><code>Promise&lt;AxiosResponse&gt;</code></td>\n<td><code>js&lt;br&gt;ajax.postForm({&lt;br&gt;  url: '/submit',&lt;br&gt;  data: {key: 'value'}&lt;br&gt;})&lt;br&gt;</code></td>\n</tr>\n</tbody>\n</table>\n<h2>Config \u53c2\u6570\u8be6\u60c5</h2>\n<table>\n<thead>\n<tr>\n<th>\u53c2\u6570</th>\n<th>\u7c7b\u578b</th>\n<th>\u5fc5\u586b</th>\n<th>\u63cf\u8ff0</th>\n<th>\u9002\u7528\u65b9\u6cd5</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>url</code></td>\n<td><code>String</code></td>\n<td>\u662f*</td>\n<td>\u8bf7\u6c42\u5730\u5740\uff08*loader\u65b9\u5f0f\u53ef\u9009\uff09</td>\n<td>\u5168\u90e8</td>\n</tr>\n<tr>\n<td><code>method</code></td>\n<td><code>String</code></td>\n<td>\u5426</td>\n<td>HTTP \u65b9\u6cd5</td>\n<td>ajax()</td>\n</tr>\n<tr>\n<td><code>params</code></td>\n<td><code>Object</code></td>\n<td>\u5426</td>\n<td>URL \u67e5\u8be2\u53c2\u6570</td>\n<td>\u5168\u90e8</td>\n</tr>\n<tr>\n<td><code>data</code></td>\n<td><code>Object</code></td>\n<td>\u662f</td>\n<td>\u8bf7\u6c42\u4f53\u6570\u636e</td>\n<td>postForm()</td>\n</tr>\n<tr>\n<td><code>loader</code></td>\n<td><code>Function</code></td>\n<td>\u5426</td>\n<td>\u6570\u636e\u9884\u5904\u7406\u51fd\u6570</td>\n<td>ajax()</td>\n</tr>\n</tbody>\n</table>",example:{isFull:!1,className:"axios_fetch_cd2d9",style:".axios_fetch_cd2d9 .ant-card {\n  border-color: black;\n  text-align: center;\n  width: 200px;\n}",list:[{title:"\u8fd9\u91cc\u586b\u5199\u793a\u4f8b\u6807\u9898",description:"\u8fd9\u91cc\u586b\u5199\u793a\u4f8b\u8bf4\u660e",code:"const { default: axiosFetch } = _AxiosFetch;\nconst { Button } = antd;\n\nconst ajax = axiosFetch();\n\nconst BaseExample = () => {\n  return (\n    <div>\n      <Button\n        onClick={() => {\n          ajax({\n            loader: async () => {\n              return await new Promise(resolve => {\n                setTimeout(() => {\n                  resolve('\u8bf7\u6c42\u6210\u529f');\n                }, 1000);\n              });\n            }\n          }).then(({data}) => {\n            console.log(data);\n            alert(data.data);\n          });\n        }}>\n        \u70b9\u51fb\u53d1\u9001\u8bf7\u6c42\n      </Button>\n    </div>\n  );\n};\n\nrender(<BaseExample />);\n\n",scope:[{name:"_AxiosFetch",packageName:"@kne/current-lib_axios-fetch",importStatement:'import * as _AxiosFetch from "@kne/axios-fetch"',component:e(5542)},{name:"antd",packageName:"antd",component:e(5199)}]}]}}},o={name:"axios-fetch",version:"1.0.4","open-version":!0,"public-url":"/axios-fetch",modules:[{name:"axios-fetch",baseDir:"/home/runner/work/axios-fetch/axios-fetch",description:"\u4e00\u4e2aaxios\u7684\u7b80\u5355\u5c01\u88c5\uff0c\u652f\u6301loader\u548curl params\uff0c\u548c@kne/react-fetch\u4fdd\u6301\u7edf\u4e00",packageName:"@kne/axios-fetch"}]}}}]);
//# sourceMappingURL=690.c8f53555.chunk.js.map